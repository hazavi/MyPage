@page "/students/delete/{id:int}"
@inject NavigationManager Nav
@inject Data.PageDbContext DbContext

<h3>Delete Student</h3>

@if (student == null)
{
    <p>Loading...</p>
}
else
{
    <dl class="row">
        <dt class="col-sm-2">Student ID</dt>
        <dd class="col-sm-10">@student.StudentID</dd>

        <dt class="col-sm-2">Name</dt>
        <dd class="col-sm-10">@student.Name</dd>

        <dt class="col-sm-2">Education</dt>
        <dd class="col-sm-10">@student.Education</dd>

        <dt class="col-sm-2">Gender</dt>
        <dd class="col-sm-10">@student.Gender</dd>
    </dl>
    <button class="btn btn-danger" @onclick="DeleteStudent">Delete</button>
}

@code {
    [Parameter]
    public int Id { get; set; }

    private Student student;

    protected override async Task OnInitializedAsync()
    {
        student = await DbContext.Students.FindAsync(Id);
    }

    private async Task DeleteStudent()
    {
        if (student != null)
        {
            DbContext.Students.Remove(student);
            await DbContext.SaveChangesAsync();
            Nav.NavigateTo("/students");
        }
    }
}
