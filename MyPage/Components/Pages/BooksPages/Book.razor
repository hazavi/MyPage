@using BookLibrary.Service
@inject OpenLibraryService OpenLibrary
@inject OpenLibraryService OpenLibrary
@rendermode InteractiveServer

<h1>Search Books</h1>

<input @bind="searchQuery" />
<button @onclick="Search">Search</button>

@if (searchResults != null && searchResults.Books.Any())
{
    foreach (var book in searchResults.Books)
    {
        <div>
            <h3>@book.Title</h3>
            <p>@string.Join(", ", book.Authors)</p>
        </div>
    }
}
else if (searchResults != null && !searchResults.Books.Any())
{
    <p>No books found</p>
}

@code {
    private string searchQuery = "";
    private OpenLibraryBookResponse searchResults;

    private async Task Search()
    {
        searchResults = await OpenLibrary.SearchBooksAsync(searchQuery);
    }
}

